<!DOCTYPE html>
 <html>
 <head>
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
 <% include("/view/console/common/css.html"){}	%>

 <title></title>
 </head>
 <body>
 <div class="container-fluid">
 <form name="boCmsNews_form"  id="boCmsNews_form" class="form-horizontal" style="margin-bottom: 70px;">
   <div class="form-group" >
 <label class="col-sm-2 control-label">是否发布</label>
 <div class="col-sm-6">
 <div class="radio">
 <label><input checked='checked' auto_name='boCmsNews_publish' type="radio"  name="publish" value="0"/>未发布</label>
 <label><input  auto_name='boCmsNews_publish' type="radio"  name="publish" value="1"/>已发布</label>
  
 </div>
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">作者</label>
 <div class="col-sm-6">
 <input  type="text"  name="author" id="author" class="form-control" check-type="required" value='${boCmsNews.author!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">来源</label>
 <div class="col-sm-6">
 <input  type="text"  name="source" id="source" class="form-control" check-type="required" value='${boCmsNews.source!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">内容</label>
 <div class="col-sm-6">
 <input  type="text"  name="content" id="content" class="form-control" check-type="required" value='${boCmsNews.content!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">新闻标题</label>
 <div class="col-sm-6">
 <input  type="text" onclick="layui.laydate({elem: this, istime: true, format: 'YYYY-MM-DD hh:mm:ss'})" name="title" id="title" class="form-control" check-type="required" value='${boCmsNews.title!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">新闻类型</label>
 <div class="col-sm-6">
 <input  type="text"  name="newsType" id="newsType" class="form-control" check-type="required number" value='${boCmsNews.newsType!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">简介</label>
 <div class="col-sm-6">
 <input  type="text"  name="intro" id="intro" class="form-control" check-type="required" value='${boCmsNews.intro!}' >
 </div>
  </div>
 <div class="form-group" >
 <label class="col-sm-2 control-label">新闻标签</label>
 <div class="col-sm-6">
 <input  type="text"  name="tag" id="tag" class="form-control" check-type="required" value='${boCmsNews.tag!}' >
 </div>
  </div>
  <div class="form-group" >
 <label class="col-sm-2 control-label">封面</label>
 <div class="col-sm-3">
   <span class="btn btn-success fileinput-button">
        <i class="glyphicon glyphicon-plus"></i>
        <span>添加</span>
  <input type="file" id="cover_file" class="form-control" value='${boCmsNews.cover!}' >
  <input type="hidden" id="cover"  name="cover"class="form-control" value='${boCmsNews.cover!}' >
    </span>
  <div id="cover_progress" class="progress">
   <div class="progress-bar progress-bar-success"></div>
  </div>
  </div>
   	<div class="col-sm-4">
   	<img id="cover_file_show" src="${boCmsNews.cover!}" style="width:100px;" alt="图片" class="img-rounded">
 </div>
 </div>
   <input type='hidden' name='id' id='id' value='${boCmsNews.id!}'><input type='hidden' name='common_token' id='common_token' value='${common_token!}'>
 </form>
  <nav class="navbar navbar-default navbar-fixed-bottom">
   <div class="nav navbar-nav navbar-right">
    <a href="#" class="btn btn-success" style="margin: 10px 60px 10px 10px"  onclick='saveZqForm()'>保存 </a>
   </div>
  </nav>
 </div>
 <% include("/view/console/common/js.html"){} 	%>
 <script type="text/javascript">
     layui.use(['layer','laydate'], function(){

     });
     $(function($) {
      /*开启表单验证*/
         $("#boCmsNews_form").validation();
               $('input[auto_name="boCmsNews_publish"]').each(function(){
       if('${boCmsNews.publish!}'==this.value){ 
             $(this).attr('checked','checked');
            }
           });
  consoleUploadImg('cover','${ctxPath}');
     });
     /*保存*/
     function saveZqForm(){
         if ($("#boCmsNews_form").valid() == false) {
             return false;
         }
         var formObject=new Object();
         formObject.publish=($('input[name="publish"]:checked').val()==''?null:$('input[name="publish"]:checked').val()); 
 formObject.author=$('#author').val()==''?null:$('#author').val(); 
 formObject.source=$('#source').val()==''?null:$('#source').val(); 
 formObject.content=$('#content').val()==''?null:$('#content').val(); 
 formObject.cover=$('#cover').val()==''?null:$('#cover').val(); 
 formObject.title=$('#title').val()==''?null:$('#title').val(); 
 formObject.newsType=$('#newsType').val()==''?null:$('#newsType').val(); 
 formObject.intro=$('#intro').val()==''?null:$('#intro').val(); 
 formObject.tag=$('#tag').val()==''?null:$('#tag').val(); 
 formObject.id=$('#id').val()==''?null:$('#id').val(); 
 
         var formObjectJson = JSON.stringify(formObject);
         $.post("${ctxPath}/console/bo_cms_news/save",
             {
                 formObjectJson :formObjectJson,
                 common_token :$("#common_token").val()
             }, function(data) {
                 layer.msg(data.message, function(){
                     parent.$("#boCmsNews").bootstrapTable("refresh");
                     parent.layer.closeAll();
                 });

             });
     }
 </script>
 </body>
